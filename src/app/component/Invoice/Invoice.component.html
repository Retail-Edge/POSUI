<!-- <div class="card card-primary card-outline">
  <div class="card-header">Invoice</div>
  <div class="card-body">

  </div>
</div> -->

<div class="col-12">
  <!-- Main content -->
  <div class="invoice p-3 mb-3">
    <!-- title row -->
    <div class="row">
      <div class="col-12">
        <h4>
          <i class="fas fa-globe"></i> Store 1
          <small class="float-right"
            >Date:
            <strong>{{
              invoiceDate | date: "MM/dd/yyyy hh:mm a"
            }}</strong></small
          >
        </h4>
      </div>
      <!-- /.col -->
    </div>
    <!-- info row -->
    <div class="row invoice-info">
      <div class="col-sm-4 invoice-col">
        From
        <address>
          <strong>Cashier : Jeff Smith</strong><br />
          795 Folsom Ave, Suite 600<br />
          San Francisco, CA 94107<br />
          Phone: (804) 123-5432<br />
        </address>
      </div>
      <!-- /.col -->
      <div class="col-sm-4 invoice-col">
        To
        <address>
          <strong>Customer : John Doe</strong><br />
          795 Folsom Ave, Suite 600<br />
          San Francisco, CA 94107<br />
          Phone: (555) 539-1037<br />
          Email: john.doe@example.com
        </address>
      </div>
      <!-- /.col -->
      <div class="col-sm-4 invoice-col">
        <b>Invoice #007612</b><br />
        <br />
        <!-- <b>Order ID:</b> 4F3S8J<br>
        <b>Payment Due:</b> 2/22/2014<br>
        <b>Account:</b> 968-34567 -->
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->

    <!-- Table row -->
    <div class="row">
      <ng-template #customItemTemplate let-model="item" let-index="index">
        <h4> {{model.productMaster.description}}</h4>
      </ng-template>
      <!-- <ng-template #customListTemplate let-matches="matches" let-query="query" let-typeaheadTemplateMethods>
        <ul class="custom-list-group" [class.dropdown-menu]="isBs3">
          <li class="custom-list-group-item"
              *ngFor="let match of matches"
              [class.active]="typeaheadTemplateMethods.isActive(match)"
              (click)="typeaheadTemplateMethods.selectMatch(match, $event)"
              (mouseenter)="typeaheadTemplateMethods.selectActive(match)">
            {{ match.item.productMaster.description }}
          </li>
        </ul>
      </ng-template> -->
      <input [(ngModel)]="currentProduct" [typeahead]="inventoryList"  placeholder="Click here to add products"
      [typeaheadMinLength]="0" class="form-control" [typeaheadItemTemplate]="customItemTemplate" [typeaheadScrollable]="true" (typeaheadOnSelect)="onSelect($event)"
      />
     
      <div class="col-12 table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Product Description</th>
              <th>SKU #</th>
              <th>Bill Qty / Available Qty</th>
              <th>Unit Price</th>
              <th>Ext Price</th>
              <th>Action <button class="btn btn-success btn-xs" (click)="onAddNewLine();"><i class="fas fa-plus"></i></button></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let rec of lineItems">
              <td *ngIf="rec.isAdding == true" colspan="5">
               <div class="col-md-11">
                <select class="form-control form-control-sm" [(ngModel)]="currentProduct" (ngModelChange)="onSelectProductNewLine(currentProduct,rec);">
                  <option *ngFor="let itemdata of inventoryList" [ngValue]="itemdata">{{itemdata.productMaster.description}}</option>
              </select>
              </div> 
              </td>
              <td *ngIf="rec.isAdding == true" colspan="1">
                <div class="col-md-1">
                  <button type="button" class="btn btn-xs btn-danger" (click)="onDeleteNewItem();">
                    <i class="fas fa-trash-alt"></i>
                  </button>
                </div>
              </td>
              <td *ngIf="rec.isAdding == false">{{ rec.productDescription }}</td>
              <td *ngIf="rec.isAdding == false">{{ rec.sku }}</td>
              <td *ngIf="rec.isAdding == false">
               <div style="display:inline-flex">
                <input
                  class="form-control form-control-sm"
                  type="number"
                  style="width: 50px"
                  [(ngModel)]="rec.billedQty"
                  (ngModelChange)="onRecalculate(rec)"
                /> <span style="padding:5px;">/ {{ rec.inStockQty }} </span>
              </div> 
              </td>
              <td *ngIf="rec.isAdding == false">
                <input
                  class="form-control form-control-sm"
                  type="number"
                  style="width: 100px"
                  [(ngModel)]="rec.unitPrice"
                  (ngModelChange)="onRecalculate(rec)"
                />
              </td>
              <td *ngIf="rec.isAdding == false">{{ rec.extPrice | currency }}</td>
              <td *ngIf="rec.isAdding == false">
                <button type="button" class="btn btn-xs btn-danger">
                  <i class="fas fa-trash-alt"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->

    <div class="row">
      <!-- accepted payments column -->
      <div class="col-8"></div>
      <!-- /.col -->
      <div class="col-4">
        <!-- <p class="lead">Amount Due 2/22/2014</p> -->

        <div class="table-responsive">
          <table class="table">
            <tbody>
              <tr>
                <th style="width: 50%">Subtotal:</th>
                <th>{{ subtotal | currency }}</th>
              </tr>
              <tr>
                <th>Tax (7.0%)</th>
                <td>{{ tax | currency }}</td>
              </tr>
              <tr>
                <th>Shipping:</th>
                <td>{{ shippingPrice | currency }}</td>
              </tr>
              <tr>
                <th>Grand Total:</th>
                <th>{{ totalPrice | currency }}</th>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->

    <!-- this row will not appear when printing -->
    <div class="row no-print">
      <div class="col-12">
        <!-- <a href="invoice-print.html" rel="noopener" target="_blank" class="btn btn-default"><i class="fas fa-print"></i> Print</a> -->
        <button type="button" class="btn btn-success float-right" (click)="onCreateInvoice()">
          <i class="far fa-credit-card"></i> Create Invoice
        </button>
         <button type="button" class="btn btn-danger" style="margin-right: 5px;" (click)="resetInvoice()">
          <i class="fas fa-recycle"></i> Reset Invoice
        </button>
      </div>
    </div>
  </div>
  <!-- /.invoice -->
</div>
